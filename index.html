<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Âë≥‰∫´¬∑ÂÖ±‰∫´ËØÑ‰ª∑ËèúÂçï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #f5f2ed;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        .app-container {
            max-width: 600px;
            width: 100%;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.05);
        }

        /* È°µÈù¢ÂàáÊç¢ */
        .page {
            display: none;
            padding: 1rem;
            padding-bottom: 80px;
        }

            .page.active {
                display: block;
            }

        /* Â§¥ÈÉ®ÂØºËà™ */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0 1.5rem;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
            border-bottom: 1px solid #f0e9e0;
        }

            .header h1 {
                font-size: 1.8rem;
                font-weight: 700;
                color: #2c3e50;
            }

        .back-btn {
            font-size: 1.8rem;
            padding: 0.5rem 1rem 0.5rem 0;
            background: none;
            border: none;
            color: #e67e22;
            display: none;
            cursor: pointer;
            font-weight: bold;
        }

            .back-btn.active {
                display: block;
            }

        /* ËèúÂçïÁΩëÊ†º */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .dish-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            cursor: pointer;
            border: 1px solid #f0e9e0;
            -webkit-tap-highlight-color: transparent;
        }

            .dish-card:active {
                transform: scale(0.98);
            }

            .dish-card img {
                width: 100%;
                height: 140px;
                object-fit: cover;
                background: #e9c9a0;
            }

        .dish-info {
            padding: 0.8rem;
        }

        .dish-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .rating-summary {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.3rem;
            font-size: 0.9rem;
        }

        .score-badge {
            background: #e67e22;
            color: white;
            font-weight: 700;
            padding: 0.2rem 0.6rem;
            border-radius: 30px;
            font-size: 0.9rem;
        }

        .stars-container {
            display: flex;
            align-items: center;
            gap: 0.2rem;
        }

        .star {
            color: #f5b342;
            font-size: 1rem;
        }

            .star.empty {
                color: #ddd;
            }

        .review-count {
            color: #888;
            margin-left: 0.2rem;
        }

        /* ËØ¶ÊÉÖÈ°µ */
        .dish-detail-image {
            width: 100%;
            height: 250px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

            .dish-detail-image img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

        .dish-detail-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .dish-detail-name {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .dish-detail-score {
            background: #e67e22;
            color: white;
            padding: 0.5rem 1.2rem;
            border-radius: 40px;
            font-weight: 700;
            font-size: 1.5rem;
        }

        .dish-description {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        /* ËØÑ‰ª∑Âå∫Âüü */
        .reviews-section {
            margin-top: 1rem;
        }

        .reviews-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.2rem;
        }

        .reviews-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .average-box {
            background: #f8f0e6;
            padding: 0.4rem 1rem;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .average-score {
            font-weight: 700;
            color: #e67e22;
            font-size: 1.2rem;
        }

        .review-list {
            list-style: none;
            max-height: 350px;
            overflow-y: auto;
            margin-bottom: 1.5rem;
            padding-right: 0.3rem;
        }

        .review-item {
            background: #f9f7f4;
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 0.8rem;
        }

        .review-header {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .reviewer-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .review-score {
            background: #e67e22;
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .review-date {
            margin-left: auto;
            font-size: 0.8rem;
            color: #999;
        }

        .review-text {
            color: #444;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        /* ËØÑ‰ª∑ËæìÂÖ•Âå∫ */
        .add-review {
            background: white;
            border-top: 1px solid #eee;
            padding: 1.2rem 0 0.5rem;
        }

        .score-input {
            margin-bottom: 1.2rem;
        }

        .score-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #555;
        }

        .score-slider {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        input[type=range] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(to right, #f5b342 0%, #e67e22 100%);
            border-radius: 10px;
        }

            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
                width: 28px;
                height: 28px;
                background: white;
                border-radius: 50%;
                box-shadow: 0 2px 10px rgba(230, 126, 34, 0.3);
                border: 2px solid #e67e22;
                cursor: pointer;
            }

        .score-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e67e22;
            min-width: 3rem;
            text-align: center;
        }

        .review-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #eee;
            border-radius: 16px;
            font-size: 1rem;
            margin-bottom: 1rem;
            resize: none;
        }

            .review-input:focus {
                outline: none;
                border-color: #e67e22;
            }

        .submit-review {
            background: #e67e22;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 40px;
            font-size: 1.1rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: background 0.2s;
        }

            .submit-review:active {
                background: #cf6d17;
            }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 2rem;
            background: #f9f7f4;
            border-radius: 16px;
        }

        /* Â∫ïÈÉ®ÂØºËà™ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            max-width: 600px;
            width: 100%;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 1rem 0;
            border-top: 1px solid #f0e9e0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.2rem;
            color: #999;
            cursor: pointer;
        }

            .nav-item.active {
                color: #e67e22;
            }

            .nav-item span:first-child {
                font-size: 1.5rem;
            }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- È¶ñÈ°µ -->
        <div id="home-page" class="page active">
            <div class="header">
                <h1>üçΩÔ∏è Âë≥‰∫´È£üËØÑ</h1>
                <div></div> <!-- Âç†‰Ωç‰øùÊåÅÂπ≥Ë°° -->
            </div>
            <div class="menu-grid" id="menu-grid"></div>
        </div>

        <!-- ËØ¶ÊÉÖÈ°µ -->
        <div id="detail-page" class="page">
            <div class="header">
                <button class="back-btn" id="back-btn">‚Üê</button>
                <h1 id="detail-title">ËèúÂìÅËØ¶ÊÉÖ</h1>
                <div></div>
            </div>
            <div id="detail-content"></div>
        </div>

        <!-- Â∫ïÈÉ®ÂØºËà™ÔºàÁÆÄÂåñÔºâ -->
        <div class="bottom-nav">
            <div class="nav-item active" data-page="home">
                <span>üè†</span>
                <span>È¶ñÈ°µ</span>
            </div>
            <div class="nav-item" data-page="popular">
                <span>üî•</span>
                <span>ÁÉ≠Èó®</span>
            </div>
        </div>
    </div>

    <script>
        // ---------- ÂÖ±‰∫´Êï∞ÊçÆÂ≠òÂÇ®Ôºà‰ΩøÁî® localStorage ÂÆûÁé∞Ë∑®Áî®Êà∑ÂÖ±‰∫´Ôºâ----------
        // Ê≥®ÊÑèÔºöÂú®Âêå‰∏ÄÂè∞ËÆæÂ§áÁöÑÂêå‰∏ÄÊµèËßàÂô®‰∏äÔºå‰∏çÂêåÁî®Êà∑ËÆøÈóÆ‰ºöÂÖ±‰∫´localStorage
        // Ë¶ÅÂÆûÁé∞ÁúüÊ≠£Ë∑®Áî®Êà∑ÂÖ±‰∫´ÔºåÈúÄË¶ÅÂêéÁ´ØÔºåËøôÈáåÂÖàÁî®localStorageÊ®°Êãü

        // ÂàùÂßãÂåñËèúÂìÅÊï∞ÊçÆ
        const STORAGE_KEY = 'shared_menu_reviews';

        // ÈªòËÆ§ËèúÂìÅÊï∞ÊçÆÔºàÊ≤°Êúâ‰ª∑Ê†ºÔºâ
        const defaultDishes = [
            {
                id: 1,
                name: '‰∏úÂù°ÁÖ®ËÇâ',
                image: 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'300\' height=\'200\' viewBox=\'0 0 300 200\'%3E%3Crect width=\'300\' height=\'200\' fill=\'%23e1c6aa\'/%3E%3Ctext x=\'40\' y=\'120\' font-family=\'system-ui\' font-size=\'32\' fill=\'%237a5a3a\'%3Eü•© ‰∏úÂù°ËÇâ%3C/text%3E%3C/svg%3E',
                description: 'Á≤æÈÄâ‰∫îËä±ËÇâÔºåÊñáÁÅ´ÊÖ¢ÁÇñ4Â∞èÊó∂ÔºåËÇ•ËÄå‰∏çËÖªÔºåÂÖ•Âè£Âç≥Âåñ„ÄÇÊê≠ÈÖçÁßòÂà∂ÈÖ±ÊñôÔºåÊòØÊù≠Â∑û‰º†ÁªüÂêçËèúÁöÑ‰ª£Ë°®„ÄÇ',
                reviews: [
                    { id: 1, user: 'ÁæéÈ£üÂÆ∂ËÄÅÁéã', score: 98, text: 'Â§™È¶ô‰∫ÜÔºÅËÇ•ËÄå‰∏çËÖªÔºåÂÖ•Âè£Âç≥ÂåñÔºåÂøÖÁÇπÔºÅ', date: '2024-01-15' },
                    { id: 2, user: 'Â∞èËä≥', score: 95, text: 'ÈÖçÁ±≥È•≠Áªù‰∫ÜÔºåÈÖ±Ê±ÅÊµìÈÉÅ', date: '2024-01-14' },
                    { id: 3, user: 'Âº†ÂÖàÁîü', score: 85, text: 'Âë≥ÈÅìÂæàÂ•ΩÔºåÂ∞±ÊòØÁ®çÂæÆÊúâÁÇπÂí∏', date: '2024-01-10' }
                ]
            },
            {
                id: 2,
                name: 'Ëä±ÈõïÁÜüÈÜâËôæ',
                image: 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'300\' height=\'200\' viewBox=\'0 0 300 200\'%3E%3Crect width=\'300\' height=\'200\' fill=\'%23d9bc9a\'/%3E%3Ctext x=\'40\' y=\'120\' font-family=\'system-ui\' font-size=\'32\' fill=\'%235d432c\'%3Eü¶ê ÈÜâÁÜüËôæ%3C/text%3E%3C/svg%3E',
                description: 'Ê¥ªËôæËí∏ÁÜüÂêéÊµ∏ÂÖ•ÈôàÂπ¥Ëä±ÈõïÈÖíÔºåÈÖíÈ¶ôÊ∏óÈÄèÔºåËôæËÇâÂºπÁâô„ÄÇÂ§èÊó•ÈôêÂÆöÔºåÊ∏ÖÂáâÂºÄËÉÉ„ÄÇ',
                reviews: [
                    { id: 4, user: 'ÈÖíÈ¨ºÊùé', score: 96, text: 'ÈÖíÈ¶ôÊµìÈÉÅÔºåËôæÂæàÊñ∞È≤ú', date: '2024-01-13' },
                    { id: 5, user: 'Â∞èÁæé', score: 88, text: 'Âë≥ÈÅìÁã¨ÁâπÔºåÈÄÇÂêà‰∏ãÈÖí', date: '2024-01-12' }
                ]
            },
            {
                id: 3,
                name: 'ÈªëÊùæÈú≤ÈπÖËÇùÁÉ©È•≠',
                image: 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'300\' height=\'200\' viewBox=\'0 0 300 200\'%3E%3Crect width=\'300\' height=\'200\' fill=\'%23b7a186\'/%3E%3Ctext x=\'40\' y=\'120\' font-family=\'system-ui\' font-size=\'28\' fill=\'%233f2e1e\'%3EüçÑ ÊùæÈú≤È•≠%3C/text%3E%3C/svg%3E',
                description: 'ÊÑèÂ§ßÂà©ËøõÂè£ÈªëÊùæÈú≤ÔºåÊê≠ÈÖçÈ¶ôÁÖéÈπÖËÇùÔºåÂ•∂Ê≤πÁÉ©È•≠ÊµìÈÉÅÈÜáÂéöÔºåÊØè‰∏ÄÂè£ÈÉΩÊòØÂ•¢Âçé‰∫´Âèó„ÄÇ',
                reviews: [
                    { id: 6, user: 'ÂêÉË¥ßÂ∞èÁéãÂ≠ê', score: 99, text: 'Â§™ÊÉäËâ≥‰∫ÜÔºÅÈπÖËÇùÂÖ•Âè£Âç≥Âåñ', date: '2024-01-11' },
                    { id: 7, user: 'Lisa', score: 97, text: 'ÊùæÈú≤È¶ôÊ∞îÂæàË∂≥ÔºåÂàÜÈáèÂàöÂ•Ω', date: '2024-01-09' }
                ]
            },
            {
                id: 4,
                name: 'ÊûÅ‰∏äÂà∫Ë∫´ÊãºÁõò',
                image: 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'300\' height=\'200\' viewBox=\'0 0 300 200\'%3E%3Crect width=\'300\' height=\'200\' fill=\'%23cfa776\'/%3E%3Ctext x=\'40\' y=\'120\' font-family=\'system-ui\' font-size=\'32\' fill=\'%234f351d\'%3Eüç£ Âà∫Ë∫´Êãº%3C/text%3E%3C/svg%3E',
                description: '‰∏âÊñáÈ±º„ÄÅÈáëÊû™È±º„ÄÅÁîúËôæ„ÄÅÂåóÊûÅË¥ùÔºåÊØèÊó•Êñ∞È≤úÁ©∫ËøêÔºåÂéöÂàáÂè£ÊÑüÔºåÊê≠ÈÖçÁé∞Á£®Â±±Ëëµ„ÄÇ',
                reviews: [
                    { id: 8, user: 'Âà∫Ë∫´Êéß', score: 98, text: 'ÈùûÂ∏∏Êñ∞È≤úÔºÅÁîúËôæÁªù‰∫Ü', date: '2024-01-08' },
                    { id: 9, user: 'Â∞èÈõÖ', score: 89, text: 'ÂìÅË¥®‰∏çÈîôÔºåÂ∞±ÊòØÊúâÁÇπË¥µ', date: '2024-01-07' }
                ]
            }
        ];

        // ÂàùÂßãÂåñ/Âä†ËΩΩÂÖ±‰∫´Êï∞ÊçÆ
        function loadDishes() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                try {
                    return JSON.parse(stored);
                } catch (e) {
                    return defaultDishes;
                }
            } else {
                // È¶ñÊ¨°‰ΩøÁî®Ôºå‰øùÂ≠òÈªòËÆ§Êï∞ÊçÆ
                localStorage.setItem(STORAGE_KEY, JSON.stringify(defaultDishes));
                return defaultDishes;
            }
        }

        // ‰øùÂ≠òÊï∞ÊçÆÂà∞localStorage
        function saveDishes(dishes) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(dishes));
        }

        // ÂΩìÂâçËèúÂìÅÊï∞ÊçÆ
        let dishes = loadDishes();
        let currentDish = null;

        // DOM ÂÖÉÁ¥†
        const homePage = document.getElementById('home-page');
        const detailPage = document.getElementById('detail-page');
        const menuGrid = document.getElementById('menu-grid');
        const detailContent = document.getElementById('detail-content');
        const backBtn = document.getElementById('back-btn');

        // ---------- ËæÖÂä©ÂáΩÊï∞ÔºöËÆ°ÁÆóÂπ≥ÂùáÂàÜÔºàÁôæÂàÜÂà∂Ôºâ----------
        function calculateAverage(reviews) {
            if (!reviews || reviews.length === 0) return 0;
            const sum = reviews.reduce((total, r) => total + r.score, 0);
            return Math.round(sum / reviews.length);
        }

        // ÁîüÊàêÊòüÊòüÊòæÁ§∫ÔºàÂü∫‰∫éÁôæÂàÜÂà∂ËΩ¨Êç¢‰∏∫5ÊòüÊòæÁ§∫Ôºå‰ΩÜ‰øùÁïôÁôæÂàÜÂà∂Êï∞ÂÄºÔºâ
        function getStarsFromScore(avgScore) {
            // Â∞ÜÁôæÂàÜÂà∂Êò†Â∞ÑÂà∞5Êòü (0-100 -> 0-5)
            const starRating = (avgScore / 20).toFixed(1);
            const fullStars = Math.floor(starRating);
            const halfStar = starRating - fullStars >= 0.5 ? 1 : 0;
            const emptyStars = 5 - fullStars - halfStar;

            let starsHtml = '';
            for (let i = 0; i < fullStars; i++) starsHtml += '‚òÖ';
            if (halfStar) starsHtml += '¬Ω';
            for (let i = 0; i < emptyStars; i++) starsHtml += '‚òÜ';

            return starsHtml;
        }

        // ---------- Ê∏≤ÊüìÈ¶ñÈ°µ ----------
        function renderHomePage() {
            menuGrid.innerHTML = dishes.map(dish => {
                const avgScore = calculateAverage(dish.reviews);
                const stars = getStarsFromScore(avgScore);
                const reviewCount = dish.reviews.length;

                return `
                        <div class="dish-card" data-dish-id="${dish.id}">
                            <img src="${dish.image}" alt="${dish.name}">
                            <div class="dish-info">
                                <div class="dish-name">${dish.name}</div>
                                <div class="rating-summary">
                                    <span class="score-badge">${avgScore}</span>
                                    <span class="stars-container">${stars}</span>
                                    <span class="review-count">(${reviewCount})</span>
                                </div>
                            </div>
                        </div>
                    `;
            }).join('');

            // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
            document.querySelectorAll('.dish-card').forEach(card => {
                card.addEventListener('click', () => {
                    const dishId = parseInt(card.dataset.dishId);
                    const dish = dishes.find(d => d.id === dishId);
                    if (dish) showDetailPage(dish);
                });
            });
        }

        // ---------- ÊòæÁ§∫ËØ¶ÊÉÖÈ°µ ----------
        function showDetailPage(dish) {
            currentDish = dish;

            // ÈáçÊñ∞‰ªéÂÖ®Â±ÄÊï∞ÊçÆËé∑ÂèñÊúÄÊñ∞ËØÑ‰ª∑ÔºàÁ°Æ‰øùÂÖ±‰∫´Ôºâ
            const freshDish = dishes.find(d => d.id === dish.id);
            if (freshDish) currentDish = freshDish;

            const avgScore = calculateAverage(currentDish.reviews);
            const reviewCount = currentDish.reviews.length;

            // Ê∏≤ÊüìËØ¶ÊÉÖÈ°µ
            detailContent.innerHTML = `
                    <div class="dish-detail-image">
                        <img src="${currentDish.image}" alt="${currentDish.name}">
                    </div>

                    <div class="dish-detail-header">
                        <div class="dish-detail-name">${currentDish.name}</div>
                        <div class="dish-detail-score">${avgScore}</div>
                    </div>

                    <div class="dish-description">${currentDish.description}</div>

                    <div class="reviews-section">
                        <div class="reviews-header">
                            <span class="reviews-title">üìù Áî®Êà∑ËØÑ‰ª∑</span>
                            <div class="average-box">
                                <span>Âπ≥ÂùáÂàÜ</span>
                                <span class="average-score">${avgScore}</span>
                            </div>
                        </div>

                        ${reviewCount === 0 ?
                    `<div class="empty-state">ÊöÇÊó†ËØÑ‰ª∑ÔºåÊù•Á¨¨‰∏ÄÊù°ÂêßÔºÅ</div>` :
                    `<ul class="review-list" id="review-list">
                                ${currentDish.reviews.map(review => `
                                    <li class="review-item">
                                        <div class="review-header">
                                            <span class="reviewer-name">${review.user}</span>
                                            <span class="review-score">${review.score}</span>
                                            <span class="review-date">${review.date}</span>
                                        </div>
                                        <div class="review-text">${review.text}</div>
                                    </li>
                                `).join('')}
                            </ul>`
                }

                        <div class="add-review">
                            <div class="score-input">
                                <div class="score-label">ËØÑÂàÜÔºà0-100ÂàÜÔºâ</div>
                                <div class="score-slider">
                                    <input type="range" id="score-slider" min="0" max="100" value="90" step="1">
                                    <span class="score-value" id="score-value">90</span>
                                </div>
                            </div>

                            <textarea class="review-input" id="review-text" placeholder="ÂàÜ‰∫´‰Ω†ÁöÑÁî®È§ê‰ΩìÈ™å..." rows="3"></textarea>
                            <button class="submit-review" id="submit-review">Êèê‰∫§ËØÑ‰ª∑</button>
                        </div>
                    </div>
                `;

            // ÁªëÂÆöÊªëÂùó‰∫ã‰ª∂
            const slider = document.getElementById('score-slider');
            const scoreValue = document.getElementById('score-value');
            if (slider && scoreValue) {
                slider.addEventListener('input', () => {
                    scoreValue.textContent = slider.value;
                });
            }

            // ÁªëÂÆöÊèê‰∫§‰∫ã‰ª∂
            document.getElementById('submit-review')?.addEventListener('click', submitReview);

            // ÂàáÊç¢È°µÈù¢
            homePage.classList.remove('active');
            detailPage.classList.add('active');
            backBtn.classList.add('active');
        }

        // ---------- Êèê‰∫§ËØÑ‰ª∑ÔºàÂÖ±‰∫´Â≠òÂÇ®Ôºâ----------
        function submitReview() {
            if (!currentDish) return;

            const slider = document.getElementById('score-slider');
            const score = parseInt(slider.value);
            const text = document.getElementById('review-text').value.trim();

            // È™åËØÅ
            if (!text) {
                alert('ËØ∑Â°´ÂÜôËØÑ‰ª∑ÂÜÖÂÆπ');
                return;
            }

            // ÂàõÂª∫Êñ∞ËØÑ‰ª∑
            const newReview = {
                id: Date.now() + Math.random(),
                user: 'ÂåøÂêçÈ£üÂÆ¢', // ÂèØ‰ª•Êâ©Â±ï‰∏∫Ëá™ÂÆö‰πâÊòµÁß∞
                score: score,
                text: text,
                date: new Date().toISOString().slice(0, 10)
            };

            // Êõ¥Êñ∞ÂÖ®Â±ÄÊï∞ÊçÆ
            const dishIndex = dishes.findIndex(d => d.id === currentDish.id);
            if (dishIndex !== -1) {
                dishes[dishIndex].reviews.push(newReview);
                // ‰øùÂ≠òÂà∞localStorageÔºàÂÖ±‰∫´Â≠òÂÇ®Ôºâ
                saveDishes(dishes);
                // Êõ¥Êñ∞ÂΩìÂâçËèúÂìÅÂºïÁî®
                currentDish = dishes[dishIndex];
            }

            // ÈáçÊñ∞Âà∑Êñ∞ËØ¶ÊÉÖÈ°µ
            showDetailPage(currentDish);

            // ÊªöÂä®Âà∞ËØÑ‰ª∑ÂàóË°®
            setTimeout(() => {
                document.querySelector('.reviews-section')?.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        // ---------- ËøîÂõûÈ¶ñÈ°µ ----------
        backBtn.addEventListener('click', () => {
            homePage.classList.add('active');
            detailPage.classList.remove('active');
            backBtn.classList.remove('active');
        });

        // ---------- Â∫ïÈÉ®ÂØºËà™ ----------
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                item.classList.add('active');

                if (item.dataset.page === 'home') {
                    homePage.classList.add('active');
                    detailPage.classList.remove('active');
                    backBtn.classList.remove('active');
                } else {
                    alert('ÁÉ≠Èó®ËèúÂìÅÂäüËÉΩÂºÄÂèë‰∏≠...');
                }
            });
        });

        // ---------- ÂàùÂßãÂåñ ----------
        renderHomePage();

        // ÂèØÈÄâÔºöÂÆöÊúüÂà∑Êñ∞Êï∞ÊçÆÔºàÂÆûÁé∞Ë∑®Ê†áÁ≠æÈ°µÂÖ±‰∫´Ôºâ
        window.addEventListener('storage', (e) => {
            if (e.key === STORAGE_KEY) {
                // ÂÖ∂‰ªñÊ†áÁ≠æÈ°µ‰øÆÊîπ‰∫ÜÊï∞ÊçÆÔºåÈáçÊñ∞Âä†ËΩΩ
                dishes = loadDishes();
                renderHomePage();
                if (currentDish) {
                    // Â¶ÇÊûúÂΩìÂâçÂú®ËØ¶ÊÉÖÈ°µÔºåÂà∑Êñ∞ÂΩìÂâçËèúÂìÅ
                    const updated = dishes.find(d => d.id === currentDish.id);
                    if (updated) showDetailPage(updated);
                }
            }
        });
    </script>
</body>
</html>